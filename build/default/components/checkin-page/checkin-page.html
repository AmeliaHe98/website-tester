<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="iron-image" assetpath="../../bower_components/iron-image/"><template><style>:host{display:inline-block;overflow:hidden;position:relative;}#baseURIAnchor{display:none;}#sizedImgDiv{position:absolute;top:0px;right:0px;bottom:0px;left:0px;display:none;}#img{display:block;width:var(--iron-image-width, auto);height:var(--iron-image-height, auto);}:host([sizing]) #sizedImgDiv{display:block;}:host([sizing]) #img{display:none;}#placeholder{position:absolute;top:0px;right:0px;bottom:0px;left:0px;background-color:inherit;opacity:1;@apply --iron-image-placeholder;}#placeholder.faded-out{transition:opacity 0.5s linear;opacity:0;}</style><a id="baseURIAnchor" href="#"></a><div id="sizedImgDiv" role="img" hidden$="[[_computeImgDivHidden(sizing)]]" aria-hidden$="[[_computeImgDivARIAHidden(alt)]]" aria-label$="[[_computeImgDivARIALabel(alt, src)]]"></div><img id="img" alt$="[[alt]]" hidden$="[[_computeImgHidden(sizing)]]" crossorigin$="[[crossorigin]]" on-load="_imgOnLoad" on-error="_imgOnError"><div id="placeholder" hidden$="[[_computePlaceholderHidden(preload, fade, loading, loaded)]]" class$="[[_computePlaceholderClassName(preload, fade, loading, loaded)]]"></div></template><script>Polymer({is:"iron-image",properties:{/**
         * The URL of an image.
         */src:{type:String,value:""},/**
         * A short text alternative for the image.
         */alt:{type:String,value:null},/**
         * CORS enabled images support:
         * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image
         */crossorigin:{type:String,value:null},/**
         * When true, the image is prevented from loading and any placeholder is
         * shown.  This may be useful when a binding to the src property is known to
         * be invalid, to prevent 404 requests.
         */preventLoad:{type:Boolean,value:!1},/**
         * Sets a sizing option for the image.  Valid values are `contain` (full
         * aspect ratio of the image is contained within the element and
         * letterboxed) or `cover` (image is cropped in order to fully cover the
         * bounds of the element), or `null` (default: image takes natural size).
         */sizing:{type:String,value:null,reflectToAttribute:!0},/**
         * When a sizing option is used (`cover` or `contain`), this determines
         * how the image is aligned within the element bounds.
         */position:{type:String,value:"center"},/**
         * When `true`, any change to the `src` property will cause the
         * `placeholder` image to be shown until the new image has loaded.
         */preload:{type:Boolean,value:!1},/**
         * This image will be used as a background/placeholder until the src image
         * has loaded.  Use of a data-URI for placeholder is encouraged for instant
         * rendering.
         */placeholder:{type:String,value:null,observer:"_placeholderChanged"},/**
         * When `preload` is true, setting `fade` to true will cause the image to
         * fade into place.
         */fade:{type:Boolean,value:!1},/**
         * Read-only value that is true when the image is loaded.
         */loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},/**
         * Read-only value that tracks the loading state of the image when the
         * `preload` option is used.
         */loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},/**
         * Read-only value that indicates that the last set `src` failed to load.
         */error:{notify:!0,readOnly:!0,type:Boolean,value:!1},/**
         * Can be used to set the width of image (e.g. via binding); size may also
         * be set via CSS.
         */width:{observer:"_widthChanged",type:Number,value:null},/**
         * Can be used to set the height of image (e.g. via binding); size may also
         * be set via CSS.
         *
         * @attribute height
         * @type number
         * @default null
         */height:{observer:"_heightChanged",type:Number,value:null}},observers:["_transformChanged(sizing, position)","_loadStateObserver(src, preventLoad)"],created:function created(){this._resolvedSrc=""},_imgOnLoad:function _imgOnLoad(){if(this.$.img.src!==this._resolveSrc(this.src)){return}this._setLoading(!1);this._setLoaded(!0);this._setError(!1)},_imgOnError:function _imgOnError(){if(this.$.img.src!==this._resolveSrc(this.src)){return}this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";this._setLoading(!1);this._setLoaded(!1);this._setError(!0)},_computePlaceholderHidden:function _computePlaceholderHidden(){return!this.preload||!this.fade&&!this.loading&&this.loaded},_computePlaceholderClassName:function _computePlaceholderClassName(){return this.preload&&this.fade&&!this.loading&&this.loaded?"faded-out":""},_computeImgDivHidden:function _computeImgDivHidden(){return!this.sizing},_computeImgDivARIAHidden:function _computeImgDivARIAHidden(){return""===this.alt?"true":void 0},_computeImgDivARIALabel:function _computeImgDivARIALabel(){if(null!==this.alt){return this.alt}// Polymer.ResolveUrl.resolveUrl will resolve '' relative to a URL x to
// that URL x, but '' is the default for src.
if(""===this.src){return""}// NOTE: Use of `URL` was removed here because IE11 doesn't support
// constructing it. If this ends up being problematic, we should
// consider reverting and adding the URL polyfill as a dev dependency.
var resolved=this._resolveSrc(this.src);// Remove query parts, get file name.
return resolved.replace(/[?|#].*/g,"").split("/").pop()},_computeImgHidden:function _computeImgHidden(){return!!this.sizing},_widthChanged:function _widthChanged(){this.style.width=isNaN(this.width)?this.width:this.width+"px"},_heightChanged:function _heightChanged(){this.style.height=isNaN(this.height)?this.height:this.height+"px"},_loadStateObserver:function _loadStateObserver(src,preventLoad){var newResolvedSrc=this._resolveSrc(src);if(newResolvedSrc===this._resolvedSrc){return}this._resolvedSrc="";this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";if(""===src||preventLoad){this._setLoading(!1);this._setLoaded(!1);this._setError(!1)}else{this._resolvedSrc=newResolvedSrc;this.$.img.src=this._resolvedSrc;this.$.sizedImgDiv.style.backgroundImage="url(\""+this._resolvedSrc+"\")";this._setLoading(!0);this._setLoaded(!1);this._setError(!1)}},_placeholderChanged:function _placeholderChanged(){this.$.placeholder.style.backgroundImage=this.placeholder?"url(\""+this.placeholder+"\")":""},_transformChanged:function _transformChanged(){var sizedImgDivStyle=this.$.sizedImgDiv.style,placeholderStyle=this.$.placeholder.style;sizedImgDivStyle.backgroundSize=placeholderStyle.backgroundSize=this.sizing;sizedImgDivStyle.backgroundPosition=placeholderStyle.backgroundPosition=this.sizing?this.position:"";sizedImgDivStyle.backgroundRepeat=placeholderStyle.backgroundRepeat=this.sizing?"no-repeat":""},_resolveSrc:function _resolveSrc(testSrc){var resolved=Polymer.ResolveUrl.resolveUrl(testSrc,this.$.baseURIAnchor.href);// NOTE: Use of `URL` was removed here because IE11 doesn't support
// constructing it. If this ends up being problematic, we should
// consider reverting and adding the URL polyfill as a dev dependency.
if("/"===resolved[0]){// In IE location.origin might not work
// https://connect.microsoft.com/IE/feedback/details/1763802/location-origin-is-undefined-in-ie-11-on-windows-10-but-works-on-windows-7
resolved=(location.origin||location.protocol+"//"+location.host)+resolved}return resolved}});</script></dom-module><dom-module id="paper-card" assetpath="../../bower_components/paper-card/"><template><style include="paper-material-styles">:host{display:inline-block;position:relative;box-sizing:border-box;background-color:var(--paper-card-background-color, var(--primary-background-color));border-radius:2px;@apply --paper-font-common-base;@apply --paper-card;}:host([hidden]), [hidden]{display:none !important;}.header{position:relative;border-top-left-radius:inherit;border-top-right-radius:inherit;overflow:hidden;@apply --paper-card-header;}.header iron-image{display:block;width:100%;--iron-image-width:100%;pointer-events:none;@apply --paper-card-header-image;}.header .title-text{padding:16px;font-size:24px;font-weight:400;color:var(--paper-card-header-color, #000);@apply --paper-card-header-text;}.header .title-text.over-image{position:absolute;bottom:0px;@apply --paper-card-header-image-text;}:host ::slotted(.card-content){padding:16px;position:relative;@apply --paper-card-content;}:host ::slotted(.card-actions){border-top:1px solid #e8e8e8;padding:5px 16px;position:relative;@apply --paper-card-actions;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><div class="header"><iron-image hidden$="[[!image]]" aria-hidden$="[[_isHidden(image)]]" src="[[image]]" alt="[[alt]]" placeholder="[[placeholderImage]]" preload="[[preloadImage]]" fade="[[fadeImage]]"></iron-image><div hidden$="[[!heading]]" class$="title-text [[_computeHeadingClass(image)]]">[[heading]]</div></div><slot></slot></template><script>Polymer({is:"paper-card",properties:{/**
         * The title of the card.
         */heading:{type:String,value:"",observer:"_headingChanged"},/**
         * The url of the title image of the card.
         */image:{type:String,value:""},/**
         * The text alternative of the card's title image.
         */alt:{type:String},/**
         * When `true`, any change to the image url property will cause the
         * `placeholder` image to be shown until the image is fully rendered.
         */preloadImage:{type:Boolean,value:!1},/**
         * When `preloadImage` is true, setting `fadeImage` to true will cause the
         * image to fade into place.
         */fadeImage:{type:Boolean,value:!1},/**
         * This image will be used as a background/placeholder until the src image has
         * loaded. Use of a data-URI for placeholder is encouraged for instant rendering.
         */placeholderImage:{type:String,value:null},/**
         * The z-depth of the card, from 0-5.
         */elevation:{type:Number,value:1,reflectToAttribute:!0},/**
         * Set this to true to animate the card shadow when setting a new
         * `z` value.
         */animatedShadow:{type:Boolean,value:!1},/**
         * Read-only property used to pass down the `animatedShadow` value to
         * the underlying paper-material style (since they have different names).
         */animated:{type:Boolean,reflectToAttribute:!0,readOnly:!0,computed:"_computeAnimated(animatedShadow)"}},/**
       * Format function for aria-hidden. Use the ! operator results in the
       * empty string when given a falsy value.
       */_isHidden:function _isHidden(image){return image?"false":"true"},_headingChanged:function _headingChanged(heading){var currentHeading=this.getAttribute("heading"),currentLabel=this.getAttribute("aria-label");if("string"!==typeof currentLabel||currentLabel===currentHeading){this.setAttribute("aria-label",heading)}},_computeHeadingClass:function _computeHeadingClass(image){return image?" over-image":""},_computeAnimated:function _computeAnimated(animatedShadow){return animatedShadow}});</script></dom-module><dom-module id="nw-check" assetpath="../"><template><style>:host{display:flex;justify-content:center;align-items:center;margin:16px;}iron-icon{height:2em;width:2em;margin-right:10px;}#label{font-size:1.5em;}</style><iron-icon style="[[checkStyle(checked)]]" icon="[[icon(checked)]]"></iron-icon><div id="label"><slot></slot></div></template><script>var NWCheck=/*#__PURE__*/function(_Polymer$Element){babelHelpers.inherits(NWCheck,_Polymer$Element);function NWCheck(){babelHelpers.classCallCheck(this,NWCheck);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(NWCheck).apply(this,arguments))}babelHelpers.createClass(NWCheck,[{key:"icon",value:function icon(checked){return checked?"check":"cancel"}},{key:"checkStyle",value:function checkStyle(checked){return"color: ".concat(checked?"green":"red")}}],[{key:"is",get:function get(){return"nw-check"}},{key:"properties",get:function get(){return{checked:{type:Boolean,value:!1}}}}]);return NWCheck}(Polymer.Element);customElements.define(NWCheck.is,NWCheck);</script></dom-module><dom-module id="hellosign-manager" assetpath="../"><template><style></style><h3>Sync Liability Waivers</h3><p>This syncs the signed liability waivers from HelloSign into the Firebase database so we can see them via the Check-In page.</p><code class="invalid" hidden$="[[!error]]"><pre>[[error]]</pre></code><p hidden$="[[!finished]]">Finished!</p><code><pre>[[ret]]</pre></code><nw-job id="sync" args="{}" type="hellosign.sync" finished="{{finished}}" working="{{working}}" return="{{ret}}" error="{{error}}"></nw-job><paper-button class="register" on-tap="sync" disabled$="[[working]]">Sync</paper-button></template><script>var HelloSignManager=/*#__PURE__*/function(_Polymer$Element){babelHelpers.inherits(HelloSignManager,_Polymer$Element);function HelloSignManager(){babelHelpers.classCallCheck(this,HelloSignManager);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(HelloSignManager).apply(this,arguments))}babelHelpers.createClass(HelloSignManager,[{key:"sync",value:function sync(){this.$.sync.generateRequest()}}],[{key:"is",get:function get(){return"hellosign-manager"}}]);return HelloSignManager}(Polymer.Element);customElements.define(HelloSignManager.is,HelloSignManager);</script></dom-module></div><dom-module id="checkin-page"><template><style include="light-page">paper-card{width:100%;color:black;}paper-item{cursor:pointer;}paper-card h2{margin-top:0;}paper-checkbox{width:100%;margin-top:16px;box-sizing:border-box;text-decoration:none;letter-spacing:2px;border-radius:3px;border:none;font-weight:bold;letter-spacing:3px;padding:11px 15px;text-transform:uppercase;cursor:pointer;border-bottom:4px solid #D74343;background-color:#FF6B6B;--primary-text-color:var(--dark-text-color);--paper-checkbox-label:{width:100%;text-align:center;position:absolute;left:0;padding-left:0;};transition:background-color 140ms, border-color 140ms;}paper-checkbox[checked]{border-color:#4BAE74;background-color:#90cfaa;}[bad]{color:red;}[good]{color:green;}[warn]{color:orange;}#completions{margin-bottom:20px;}.completion{padding:10px;cursor:pointer;}.completion:hover{background-color:rgba(0,0,0,0.1);}.completion[selected]{background-color:rgba(0,0,0,0.2);}.right{float:right;}[hidden]{display:none;}code{font-family:monospace;background-color:rgba(0,0,0,0.9);padding:6px;color:var(--dark-text-color);}h3{margin-top:80px;}paper-card p{font-size:24pt;text-align:center;text-transform:capitalize;padding:10px;font-weight:lighter;border-radius:3px;}paper-card p[warn]{background-color:#f28500;color:white;}paper-card p[danger]{background-color:#D74343;color:white;}p:empty{display:none;}p:first-child{margin-top:0;}nw-tags{display:inline-block;margin:16px;}#inputs{display:flex;align-items:flex-end;}#form{width:150px;margin-right:5px;}#search{flex-grow:1000;}.card-header{margin-bottom:30px;}h1{padding-top:1em;}</style><h1 title="">Check-In</h1><div class="content"><center><p><small><b>Shortcuts:</b> Search <code>/</code>, Check-In <code>space</code></small></p></center><div id="inputs"><paper-dropdown-menu id="form" label="Form" selected-item-label="{{form}}"><paper-listbox slot="dropdown-content" selected="0"><paper-item>registration</paper-item><paper-item>mentorexpo</paper-item><paper-item>volunteer</paper-item></paper-listbox></paper-dropdown-menu><paper-input label="Search" value="{{query}}" id="search" disabled="[[!lunr]]"><iron-icon icon="icons:search" prefix=""></iron-icon></paper-input></div><paper-card hidden$="[[!displayID]]"><div class="card-content"><div class="card-header"><a class="right" target="_blank" href="/admin/select/[[form]]/[[displayID]]"><paper-icon-button icon="info-outline"></paper-icon-button></a><h2>[[heading(display)]]</h2></div><nw-check checked="[[display.rsvp.going]]">RSVPed Going</nw-check><nw-check checked="[[waiver.title]]">Signed Waiver<template is="dom-if" if="[[waiver.title]]">— [[waiver.title]]</template></nw-check><center><nw-tags tags="[[display.tags]]" disabled=""></nw-tags></center><nw-check checked="[[display.rsvp.large_electronic]]">Allowed to bring large electronic</nw-check><template is="dom-if" if="[[display.rsvp.large_electronic]]"><paper-input-container always-float-label=""><label slot="label">Large Electronic Reason</label> <span slot="input" class="paper-input-input">[[display.rsvp.large_electronic_reason]]</span></paper-input-container></template><paper-textarea always-float-label="" label="Check In Notes" value="{{display.check_in_notes}}"></paper-textarea><paper-checkbox id="checkbox" checked="{{display.checked_in}}">Checked In</paper-checkbox><paper-checkbox id="waitlist" checked="{{display.dayof_waitlist}}">Day Of Waitlist</paper-checkbox><nw-check checked="[[display.nfc_written]]">NFC Tag Written</nw-check></div></paper-card><div id="completions"><template is="dom-repeat" items="[[autocomplete]]"><div class="completion" selected$="[[eq(index, autocompleteIndex)]]" on-tap="handleTap">[[name(registrations, item)]] &lt;[[email(registrations, item)]]&gt;</div></template></div><paper-dropdown-menu label="NFC Device" selected-item="{{deviceItem}}"><paper-listbox slot="dropdown-content"><paper-item></paper-item><template is="dom-repeat" items="[[sortName(devices)]]"><paper-item deviceid="[[item.id]]"><paper-item-body two-line=""><div>[[item.name]] &lt;[[item.email]]&gt;</div><div secondary="">[[item.manufacturer]] [[item.model]] - [[item.id]]</div></paper-item-body></paper-item></template></paper-listbox></paper-dropdown-menu><h2>Helpful Links</h2><ul><li><a target="_blank" href="https://github.com/nwhacks/nfc/releases">NFC Android App</a></li><li><a target="_blank" href="https://app.hellosign.com/s/faca04cc">19+ Waiver</a></li><li><a target="_blank" href="https://app.hellosign.com/s/7e0b0065">Under 19 Waiver</a></li><li><a target="_blank" href="/register">Registration Form</a></li><li><a target="_blank" href="/mentorexpo">Mentor / Expo Judge Form</a></li><li><a target="_blank" href="/volunteer">Volunteer Form</a></li></ul><h2>HelloSign</h2><hellosign-manager is-admin="[[isAdmin]]"></hellosign-manager></div><firebase-document disabled="[[!isAdmin]]" path="/admin/hellosign/[[formatEmail(display.email)]]" data="{{waiver}}"></firebase-document><firebase-query id="regs" disabled="[[!isAdmin]]" path="/form/[[form]]" data="{{registrations}}"></firebase-query><firebase-document disabled="[[!isAdmin]]" path="/form/[[form]]/[[displayID]]" data="{{display}}"></firebase-document><firebase-query disabled="[[!isAdmin]]" path="/admin/devices" data="{{devices}}"></firebase-query><firebase-document disabled="[[!isAdmin]]" path="/admin/devices/[[deviceid]]" data="{{device}}"></firebase-document></template><script>var CheckinPage=/*#__PURE__*/function(_Polymer$Element){babelHelpers.inherits(CheckinPage,_Polymer$Element);function CheckinPage(){babelHelpers.classCallCheck(this,CheckinPage);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(CheckinPage).apply(this,arguments))}babelHelpers.createClass(CheckinPage,[{key:"connectedCallback",value:function connectedCallback(){var _this=this;babelHelpers.get(babelHelpers.getPrototypeOf(CheckinPage.prototype),"connectedCallback",this).call(this);this.$.search.addEventListener("keydown",function(e){e.stopPropagation();if("ArrowDown"===e.code){_this.autocompleteIndex=Math.min(_this.autocompleteIndex+1,_this.autocomplete.length-1)}else if("ArrowUp"===e.code){_this.autocompleteIndex=Math.max(_this.autocompleteIndex-1,0)}else if("Enter"===e.code){_this.select()}else{return}e.preventDefault()});var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.root.querySelectorAll("paper-textarea")[Symbol.iterator](),_step,e;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){e=_step.value;e.addEventListener("keydown",function(e){e.stopPropagation()})}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}this.keyHandler=this.keyHandler.bind(this);document.addEventListener("keydown",this.keyHandler);var data="",started=!1,timeout=null;this._cardListener=window.addEventListener("keydown",function(e){if(";"===e.key||"+"===e.key||"%"===e.key){data="";started=!0;if(timeout){clearTimeout(timeout)}timeout=setTimeout(function(){started=!1;timeout=null},1e3)}if(!started){return}e.preventDefault();e.stopPropagation();if(_this.printableKey(e.keyCode)){if("Enter"===e.key){data+="\n"}else{data+=e.key}}if("?\n"===data.slice(-2)&&"Enter"===e.key){_this.checkCard(data);started=!1}})}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(CheckinPage.prototype),"disconnectedCallback",this).call(this);window.removeEventListener(this._cardListener);document.removeEventListener("keydown",this.keyHandler)}},{key:"handleForm",value:function handleForm(form){this.displayID="";this.lunr=null}},{key:"checkCard",value:function checkCard(data){var parts=data.match(/[%;+](\d+)=(\d+)=(\d+)\?/);if(!parts||4!==parts.length){console.log("unknown card format!",data,parts);return}var studentNumber=parts[2];console.log("student number",studentNumber);if(!this.registrations){return}var index=-1;this.registrations.forEach(function(hacker,i){if(hacker.student_number==studentNumber){index=i}});if(0>index){alert("Can't find student number ".concat(studentNumber));return}this.setDisplay(index)}},{key:"printableKey",value:function printableKey(keycode){return 47<keycode&&58>keycode||// number keys
32===keycode||13===keycode||// spacebar & return key(s) (if you want to allow carriage returns)
64<keycode&&91>keycode||// letter keys
95<keycode&&112>keycode||// numpad keys
185<keycode&&193>keycode||// ;=,-./` (in order)
218<keycode&&223>keycode;// [\]' (in order)
}},{key:"_computeDeviceID",value:function _computeDeviceID(deviceItem){if(!deviceItem){return}return deviceItem.deviceid}},{key:"keyHandler",value:function keyHandler(e){if("/"===e.key){this.$.search.focus()}else if("Space"===e.code&&this.display){this.set("display.checked_in",!this.display.checked_in)}else{return}e.preventDefault()}},{key:"handleTap",value:function handleTap(e){this.autocompleteIndex=e.model.index;this.select()}},{key:"select",value:function select(){var id=this.autocomplete[this.autocompleteIndex];if(!id){return}this.setDisplay(id)}},{key:"setDisplay",value:function setDisplay(id){var registration=this.registrations[id];this.setProperties({displayID:registration.$key,query:"",autocomplete:[]});this.$.search.blur()}},{key:"updateDisplay",value:function updateDisplay(display){if(!display){return}if(display.checked_in===void 0){display.checked_in=!1}if(this.device&&this.device.id){this.set("device.write_id",this.displayID);this.set("device.write_form",this.form);this.set("device.write_name","".concat(display.first_name," ").concat(display.last_name))}}},{key:"heading",value:function heading(hacker){return hacker.first_name+" "+hacker.last_name+" <"+hacker.email+">"}},{key:"eq",value:function eq(a,b){return a===b}},{key:"handleRegistrations",value:function handleRegistrations(registrations){if(!registrations){return}this.updateDuplicateIndex(registrations);this.updateLunrIndex(registrations)}},{key:"updateDuplicateIndex",value:function updateDuplicateIndex(registrations){var _this2=this,keys=registrations.map(function(a){return a.$key}),dedup={};registrations.forEach(function(hacker,i){var email=_this2.cleanEmail(hacker.email);hacker.cleanEmail=email;var _ref=dedup[email]||{count:0},count=_ref.count;dedup[email]={last:hacker.id,count:count+1}});var duplicateIndices={};registrations.forEach(function(hacker,i){var _dedup$hacker$cleanEm=dedup[hacker.cleanEmail],last=_dedup$hacker$cleanEm.last,count=_dedup$hacker$cleanEm.count;if(1<count&&last!==hacker.id){duplicateIndices[i]=!0}});this.duplicateIndices=duplicateIndices}},{key:"cleanEmail",value:function cleanEmail(email){return(email||"").toLowerCase().trim()}},{key:"handleSearch",value:function handleSearch(query,lunr){if(!query||!lunr){return}var newAutocomplete=this.lunr.search(query).slice(0,5).map(function(a){return a.ref});if(JSON.stringify(newAutocomplete)!==JSON.stringify(this.autocomplete)){this.autocompleteIndex=0;this.autocomplete=newAutocomplete;this.displayID=""}}},{key:"updateLunrIndex",value:function updateLunrIndex(registrations){if(!registrations){return}var regCount=registrations.length;if(0===regCount||this.lastLunrIndexCount===regCount){return}this.lastLunrIndexCount=regCount;var self=this,search=lunr(function(){var _this3=this;this.ref("id");this.field("email");this.field("emailSplit");this.field("name");this.field("first_name");this.field("last_name");registrations.forEach(function(hacker,i){if(self.duplicateIndices[i]||!hacker.email){return}_this3.add({id:i,email:hacker.email,emailSplit:hacker.email.replace(/\W+/g," "),name:hacker.name,first_name:hacker.first_name,last_name:hacker.last_name})})});this.lunr=search}},{key:"name",value:function name(registrations,id){var hacker=registrations[id];if(!hacker){return}return hacker.first_name+" "+hacker.last_name}},{key:"email",value:function email(registrations,id){return registrations[id].email}},{key:"warnStatus",value:function warnStatus(hacker){var status=this.displayStatus(hacker);return"Accepted, No Response"===status||"waitlisted"===status}},{key:"dangerStatus",value:function dangerStatus(hacker){var status=this.displayStatus(hacker);return"rejected"===status}},{key:"displayStatus",value:function displayStatus(hacker){if("accepted"===hacker.status){if(hacker.rsvp){return"accepted"}else{return"Accepted, No Response"}}return hacker.status}},{key:"warnAge",value:function warnAge(age){return age&&-1!==age.indexOf("under")}},{key:"updateWaitlist",value:function updateWaitlist(waitlist){if(!waitlist){return}this.set("display.dayof_waitlist_time",moment().toISOString())}},{key:"formatEmail",value:function formatEmail(email){if(!email){return}return email.replace(/\./g,"%2E")}},{key:"sortName",value:function sortName(devices){return devices.sort(function(a,b){return a.name.toLowerCase()<b.name.toLowerCase()?-1:1})}}],[{key:"is",get:function get(){return"checkin-page"}},{key:"properties",get:function get(){return{displayID:{value:""},lunr:{type:Object,value:!1},deviceid:{computed:"_computeDeviceID(deviceItem)"}}}},{key:"observers",get:function get(){return["handleRegistrations(registrations)","handleForm(form)","handleSearch(query, lunr)","updateWaitlist(display.dayof_waitlist)","updateDisplay(display)"]}}]);return CheckinPage}(Polymer.Element);customElements.define(CheckinPage.is,CheckinPage);</script></dom-module></body></html>